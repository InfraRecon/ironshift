{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";const UnityLoader=()=>{const containerRef=useRef(null);const canvasRef=useRef(null);const[unityInstance,setUnityInstance]=useState(null);useEffect(()=>{if(!containerRef.current||!canvasRef.current)return;const canvas=canvasRef.current;// Remove any Safari-specific patches (we don't need them)\nif(typeof HTMLCanvasElement!==\"undefined\"){HTMLCanvasElement.prototype.getContextSafariWebGL2Fixed=undefined;}const buildUrl=\"/InfraRecon/ironshift/assets/Build\";const loaderUrl=\"\".concat(buildUrl,\"/assets.loader.js\");const dataUrl=\"\".concat(buildUrl,\"/assets.data\");const frameworkUrl=\"\".concat(buildUrl,\"/assets.framework.js\");const wasmUrl=\"\".concat(buildUrl,\"/assets.wasm\");const script=document.createElement(\"script\");script.src=loaderUrl;script.onload=()=>{if(window.createUnityInstance){window.createUnityInstance(canvas,{dataUrl,frameworkUrl,codeUrl:wasmUrl,streamingAssetsUrl:\"StreamingAssets\",companyName:\"YourCompany\",productName:\"InfraRecon\",productVersion:\"1.0\",devicePixelRatio:window.devicePixelRatio}).then(instance=>setUnityInstance(instance)).catch(err=>console.error(\"Unity load error:\",err));}};document.body.appendChild(script);return()=>{if(unityInstance){unityInstance.Quit().catch(()=>{});}document.body.removeChild(script);};},[]);return/*#__PURE__*/_jsx(\"div\",{ref:containerRef,id:\"unity-container\"// ✅ Important: Unity may use this ID\n,style:{width:\"100%\",height:\"100vh\",position:\"relative\"},children:/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,id:\"unity-canvas\"// ✅ Important: give the canvas an explicit ID\n,style:{width:\"100%\",height:\"100%\",background:\"#000\"}})});};export default UnityLoader;","map":{"version":3,"names":["React","useEffect","useRef","useState","jsx","_jsx","UnityLoader","containerRef","canvasRef","unityInstance","setUnityInstance","current","canvas","HTMLCanvasElement","prototype","getContextSafariWebGL2Fixed","undefined","buildUrl","loaderUrl","concat","dataUrl","frameworkUrl","wasmUrl","script","document","createElement","src","onload","window","createUnityInstance","codeUrl","streamingAssetsUrl","companyName","productName","productVersion","devicePixelRatio","then","instance","catch","err","console","error","body","appendChild","Quit","removeChild","ref","id","style","width","height","position","children","background"],"sources":["C:/Users/Infer/Documents/GitHub/ironshift/src/components/UnityGame.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\n\r\nconst UnityLoader = () => {\r\n  const containerRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const [unityInstance, setUnityInstance] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!containerRef.current || !canvasRef.current) return;\r\n\r\n    const canvas = canvasRef.current;\r\n\r\n    // Remove any Safari-specific patches (we don't need them)\r\n    if (typeof HTMLCanvasElement !== \"undefined\") {\r\n      HTMLCanvasElement.prototype.getContextSafariWebGL2Fixed = undefined;\r\n    }\r\n\r\n    const buildUrl = \"/InfraRecon/ironshift/assets/Build\";\r\n    const loaderUrl = `${buildUrl}/assets.loader.js`;\r\n    const dataUrl = `${buildUrl}/assets.data`;\r\n    const frameworkUrl = `${buildUrl}/assets.framework.js`;\r\n    const wasmUrl = `${buildUrl}/assets.wasm`;\r\n\r\n    const script = document.createElement(\"script\");\r\n    script.src = loaderUrl;\r\n    script.onload = () => {\r\n      if (window.createUnityInstance) {\r\n        window.createUnityInstance(canvas, {\r\n          dataUrl,\r\n          frameworkUrl,\r\n          codeUrl: wasmUrl,\r\n          streamingAssetsUrl: \"StreamingAssets\",\r\n          companyName: \"YourCompany\",\r\n          productName: \"InfraRecon\",\r\n          productVersion: \"1.0\",\r\n          devicePixelRatio: window.devicePixelRatio,\r\n        })\r\n        .then((instance) => setUnityInstance(instance))\r\n        .catch((err) => console.error(\"Unity load error:\", err));\r\n      }\r\n    };\r\n    document.body.appendChild(script);\r\n\r\n    return () => {\r\n      if (unityInstance) {\r\n        unityInstance.Quit().catch(() => {});\r\n      }\r\n      document.body.removeChild(script);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      ref={containerRef}\r\n      id=\"unity-container\" // ✅ Important: Unity may use this ID\r\n      style={{ width: \"100%\", height: \"100vh\", position: \"relative\" }}\r\n    >\r\n      <canvas\r\n        ref={canvasRef}\r\n        id=\"unity-canvas\" // ✅ Important: give the canvas an explicit ID\r\n        style={{ width: \"100%\", height: \"100%\", background: \"#000\" }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UnityLoader;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE3D,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxB,KAAM,CAAAC,YAAY,CAAGL,MAAM,CAAC,IAAI,CAAC,CACjC,KAAM,CAAAM,SAAS,CAAGN,MAAM,CAAC,IAAI,CAAC,CAC9B,KAAM,CAACO,aAAa,CAAEC,gBAAgB,CAAC,CAAGP,QAAQ,CAAC,IAAI,CAAC,CAExDF,SAAS,CAAC,IAAM,CACd,GAAI,CAACM,YAAY,CAACI,OAAO,EAAI,CAACH,SAAS,CAACG,OAAO,CAAE,OAEjD,KAAM,CAAAC,MAAM,CAAGJ,SAAS,CAACG,OAAO,CAEhC;AACA,GAAI,MAAO,CAAAE,iBAAiB,GAAK,WAAW,CAAE,CAC5CA,iBAAiB,CAACC,SAAS,CAACC,2BAA2B,CAAGC,SAAS,CACrE,CAEA,KAAM,CAAAC,QAAQ,CAAG,oCAAoC,CACrD,KAAM,CAAAC,SAAS,IAAAC,MAAA,CAAMF,QAAQ,qBAAmB,CAChD,KAAM,CAAAG,OAAO,IAAAD,MAAA,CAAMF,QAAQ,gBAAc,CACzC,KAAM,CAAAI,YAAY,IAAAF,MAAA,CAAMF,QAAQ,wBAAsB,CACtD,KAAM,CAAAK,OAAO,IAAAH,MAAA,CAAMF,QAAQ,gBAAc,CAEzC,KAAM,CAAAM,MAAM,CAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC,CAC/CF,MAAM,CAACG,GAAG,CAAGR,SAAS,CACtBK,MAAM,CAACI,MAAM,CAAG,IAAM,CACpB,GAAIC,MAAM,CAACC,mBAAmB,CAAE,CAC9BD,MAAM,CAACC,mBAAmB,CAACjB,MAAM,CAAE,CACjCQ,OAAO,CACPC,YAAY,CACZS,OAAO,CAAER,OAAO,CAChBS,kBAAkB,CAAE,iBAAiB,CACrCC,WAAW,CAAE,aAAa,CAC1BC,WAAW,CAAE,YAAY,CACzBC,cAAc,CAAE,KAAK,CACrBC,gBAAgB,CAAEP,MAAM,CAACO,gBAC3B,CAAC,CAAC,CACDC,IAAI,CAAEC,QAAQ,EAAK3B,gBAAgB,CAAC2B,QAAQ,CAAC,CAAC,CAC9CC,KAAK,CAAEC,GAAG,EAAKC,OAAO,CAACC,KAAK,CAAC,mBAAmB,CAAEF,GAAG,CAAC,CAAC,CAC1D,CACF,CAAC,CACDf,QAAQ,CAACkB,IAAI,CAACC,WAAW,CAACpB,MAAM,CAAC,CAEjC,MAAO,IAAM,CACX,GAAId,aAAa,CAAE,CACjBA,aAAa,CAACmC,IAAI,CAAC,CAAC,CAACN,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC,CACtC,CACAd,QAAQ,CAACkB,IAAI,CAACG,WAAW,CAACtB,MAAM,CAAC,CACnC,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,mBACElB,IAAA,QACEyC,GAAG,CAAEvC,YAAa,CAClBwC,EAAE,CAAC,iBAAkB;AAAA,CACrBC,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAM,CAAEC,MAAM,CAAE,OAAO,CAAEC,QAAQ,CAAE,UAAW,CAAE,CAAAC,QAAA,cAEhE/C,IAAA,WACEyC,GAAG,CAAEtC,SAAU,CACfuC,EAAE,CAAC,cAAe;AAAA,CAClBC,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAM,CAAEC,MAAM,CAAE,MAAM,CAAEG,UAAU,CAAE,MAAO,CAAE,CAC9D,CAAC,CACC,CAAC,CAEV,CAAC,CAED,cAAe,CAAA/C,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}